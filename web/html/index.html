<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Video Room</title>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/webrtc-adapter/8.2.3/adapter.min.js" ></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" ></script>
	<script type="text/javascript" src="janus.js" ></script>
	<script type="text/javascript" src="video-cover.js"></script>	
	<script type="text/javascript" src="layout.js"></script>	
	<script type="text/javascript" src="videoroom.js"></script>
	<link rel="stylesheet" href="video_grid.css" type="text/css"/>
	<link rel="stylesheet" href="select_role.css" type="text/css"/>	
  </head>

  <body>
    <div id="video-grid" style="display:none"></div>
    
    <div id="select-role">
      <div class="pane publish">
	<button class="glass-button" onclick="javascript:start(true);">Publish</button>
      </div>
      <div class="divider"></div>
      <div class="pane subscribe">
	<button class="glass-button" onclick="javascript:start(false);">Subscribe</button>
      </div>
    </div>

    
    <script>
      function start(publisher) {
	  
	  $("#select-role").hide();
	  $("#video-grid").show();
	  
	  const protocol = window.location.protocol;
          const hostname = window.location.hostname;
          const wsp = (protocol === "https:") ? "wss:" : "ws:";
	  VideoRoom.init({
	      publisher: publisher,
	      janusUrl: wsp + "//" + hostname + "/janus-wss",
	      gridId: 'video-grid'
	  });
      };
    </script>
    
  </body>
</html>
